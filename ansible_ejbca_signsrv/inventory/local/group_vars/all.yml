---

organizationName: Garner
organizationNameShort: "{{ organizationName }}"
organizationNameCRL: "{{ organizationName }}"
organizationDomainName: garner.pki
countryName: US
superAdminCn: "7-12-GarnerSA"
sharedVarsLocation: ~/ansible/ansibleCacheDir

# Deployment locations for all the servers
ejbca_root_dir: /opt
ejbca_src_link_dir: "{{  ejbca_root_dir }}/ejbca"
ejbca_home: "{{ ejbca_root_dir }}/ejbca"
ejbca_sh: "{{ ejbca_home }}/bin/ejbca.sh"
signsrv_root_dir: /opt
signsrv_home: "{{ signsrv_root_dir }}/signsrv"
wildfly_install_dir: /opt
wildfly_home: "{{ wildfly_install_dir }}/wildfly"
ejbca_group: wildfly
ejbca_user: wildfly
signsrv_group: wildfly
signsrv_user: wildfly
identity_batch_output_dir: /var/tmp

# Manage the OS user that will run wildfly
ejbca_manage_user: true
ejbca_user_profile: "/home/{{ ejbca_user }}"
signsrv_manage_user: true
signsrv_user_profile: "/home/{{ signsrv_user }}"

# Elytron password file location used in the EJBCA and SS prep roles
wildfly_elytron_pass_dir: /opt/elytron
wildfly_elytron_pass_file: "{{ wildfly_elytron_pass_dir }}/wildfly_pass"

# Directories to store files on Ansible controller
ejbca_crl_dir_output: "{{ playbook_dir }}/ejbcaCRLs"
ejbca_cacrt_dir_output: "{{ playbook_dir }}/ejbcaCaCerts"
ejbca_csr_dir_output: "{{ playbook_dir }}/ejbcaCSR"

# Create Root Node TLS end entity to Issuing Cluster and copy down to Ansible controller
create_root_tls_cert: true

# If configuring peering, the serial numbers used in the EJBCA roles are stored as a fact in that yaml file
peer_ca_cert_serial_numbers: "{{ lookup('file', '{{ ejbca_csr_dir_output }}/peer_cert_serial_numbers.yml', errors='ignore' ) | from_yaml }}"
#peer_ca_cert_serial_numbers: "{{ lookup('file', '~/ansible/ansibleCacheDir/peer_cert_serial_numbers.yml', errors='ignore' ) | from_yaml }}"
ra_peer_cert_serial_numbers: "{{ lookup('file', '{{ ejbca_csr_dir_output }}/ra_peer_cert_serial_numbers.yml', errors='ignore' ) | from_yaml }}"

# EJBCA CLI password to configure for the CLI account
ejbca_conf_cli_default_password: "{{ encrypted_ejbca_cli_password | default('ejbca') }}"
ejbca_conf_ca_cmskeystorepass: "{{ encrypted_ejbca_conf_ca_cmskeystorepass | default('ejbca') }}"

# Location to write the CRL files on server
ejbca_crl_dir_enabled: false
ejbca_crl_dir:
  - /opt/web/CRLs
  - /opt/web/AIA

# Apache Ant
apache_ant_remote_dir: ~/Downloads/PK-Software/apache-ant-1.10.12-bin.tar.gz
ant_version: apache-ant-1.10.12-bin.tar.gz
ant_url: "https://mirror.olnevhost.net/pub/apache/ant/binaries/{{ ant_version }}" 
ant_checksum: sha256:4b3b557279bae4fb80210a5679180fdae3498b44cfd13368e3386e2a21dd853b

# JDBC driver when sourcing locally instead of downloading
ejbca_jdbc_remote_dir: ~/Downloads/PK-Software/mariadb-java-client-2.7.2.jar
ejbca_jdbc_gen_name: "{{ appsrv_datasources[0].database_jar_filename }}"

# CA chains to add to the HTTPD trusted CA certificate file for certauth
# caname: Name of the CA in EJBCA
# fullchain: Must be set to true for this to work by getting the issuing CA chain and then adding that chain to the file
httpd_trusted_cas:
  - caname: "ManagementCA"
    fullchain: true
  - caname: "Garner-Sub-CA"
    fullchain: true

# List of CA's to export the CA cert from EJBCA CA nodes and import as an external CA into external RA/VA nodes.
# This variable is also used for exporting CRL's from EJBCA CA node to import into external RA/VA's
# caname: Name of the CA in EJBCA
# The superadmincn can be added to each CA to add a Common Name to the superadmin role.
# fullchain: Must be set to false for this to work by getting each CA certificate to import as an external CA
ejbca_ca_import:
  - caname: "ManagementCA"
    fullchain: false
  - caname: "Garner-Root-CA"
    fullchain: false
  - caname: "Garner-Sub-CA"
    fullchain: false

# Logging
no_log_value: false

## REST API
# Local files
local_rest_dir: "{{ playbook_dir }}/ejbcaRest"

# API Variables
ejbca_api_base_url: "ca01.garner.pki/ejbca/ejbca-rest-api/v1"


# API Calls
# Call for CA cert download
ca_cert_url: "http://ca01.garner.pki/ejbca/publicweb/webdist/certdist?cmd=cacert&issuer=CN%3DGarner+Root+CA+G1%2COU%3DCertification+Authorities%2CO%3DGarner%2CC%3DUS&level=0"
ca_path: "{{ local_rest_dir }}/{{ ca_cert }}"
ca_cert: ca-chain.crt

# Rest Status
ejbca_api_url:  "certificate/status"

# Credentials
rest_api_creds:
  - name: "Ansible-REST-API-RA"
    username: ansible_rest_api_creds
    password: "{{ enc_rest_end_entity_pass| default('foo123') }}"
    dn: "C={{ countryName }},O={{ organizationName }},OU=People,cn=Ansible-REST-API-RA"
    certprofile: Authentication-2048-3y
    eeprofile: userAuthentication
    caname: "{{ organizationNameShort }}-Sub-CA"
    token: PEM
    useType: ra
    match_with: "WITH_COMMONNAME"
    match_value: "Ansible-REST-API-RA"
    role: RA-REST
rest_private_key: rest_private_key.pem
rest_public_key: rest_public_key.crt
rest_csr: rest_api.csr
csr_path: "{{ local_rest_dir }}/{{ rest_csr }}"
reset_rest_api_creds: true
enc_rest_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64326530373264306533653166383039353364646435633435613539343561383535316239343862
          3139313264383832363264343638373633323630653331620a313932386238613064323737366230
          36363065333766353765306635363164343032626432346139333230343261633330616164336331
          3739643735376266360a623035666431643265353563626336393066613730623535653630333763
          64626562613639303534303934396563353233616564623538326166623562346365653165316539
          61356165393131393262613431663132343336653239643565333230353862633733326163373634
          31376264636630616636333166383930336139386338366266336266656434363039316531633761
          30396363396530333535343464346639373465663062333065656532346265613337643835376139
          62383938633530396365626566636333343063383933366361303638383865373637343431633166
          34393334666161666462636337653738346137376631313661346535363165303737306439633765
          65633136326365383564353561383237396232643863386561313365656561306666623466383032
          62383366656338616235303431653539306236626262633962323136353934353030353935343135
          31643531633238303934316162616362366635316562323631336262666265363230626632653038
          64653533373039633566663266363434656234316530656430333561346565346463353932356363
          61356332623562336665666262313736303237353332356566306439303261343935333939626232
          31353533326233383732303763646432666538346261383036393266336237383031373162646161
          62616261646130396166663465623038316237366630663763383737663765323834376161383732
          34373661333732323533316666363363356536653361653832323466303535313262313835376632
          63346565633834313437393436623863623039633431346434316230663035346336643931363732
          39653038363038343335663831666361303263326639343563306531366537393532613839306138
          62363665333233313038343834623038333466393439363430323766643535663132636439366231
          64666139366531306437613431343939613264643831616662363564396534666666343330393434
          38653333363761646639323738333332643031333635313030326661643765303238613263663936
          34303463653263613936306534623561326233353439306366646563343064643535343033393735
          65306230366633346433306533336265623234366563643161656264356461346161376163326161
          61303736623630393261613563393434303031383237306263353538316338636335616131616633
          61376639396633376532356564386662623464313830663935633634663139303039366435316432
          32316439376465333862666663346365646239346530643462613061373136366530386131393161
          34303232643139656337363562656662303362333563623037303165383734326235333963353962
          37333731383936643037646337336365383161383437636435306534353465613538643562373335
          36616263363334336632323861663531363161633265653962316136326537396362376630643538
          38313637646435653565366230623838636162626535303230643530373735663734636331316537
          62313534393264636434393837653933366462363165316539653665613261376361663732353363
          31376439303434633965323937353939323433376461346631643762643535326563663263663966
          37396365363663646130643035623663323631623339343965643238356232393635313132343963
          63643435633734343639393831656338333766663465343530613234653637643236386530616537
          36633961316235656132333766303436643565623263346337373734663534333261396338646635
          38326466396466343932353332396432316565666665306563633431653633383238373236306464
          34376164343736346262626461306337353062353363643361653864353934356565383033303234
          31393866346130383037653564353334306437373636343764366335666132653439316265393738
          64396338663065393237623263393533643734386230613331343537326633663638353132323566
          65353237326362636138653862616339666434363635633430333537383433366534393934366264
          37326333303134366631623939393866393033343163663439376534653063666363313563636535
          35663934646336333462333566663366396432346236643166623135386339363766316265616238
          64326165373266383234356632643839646633316138316639396365643639366137353136396264
          37316534636333396661613336363564353131333438333137633466333438626536333636343961
          64373937363836303035396666666364373163353333306633383664356235633164663537663730
          64393339383830353239386432646238623434643731666364626130633361313862336530393532
          31356633363064626631343066363136356631306637363634323035636239643665663563363565
          64306264623163666632373866663137336262643566383530313861393530346366363935633262
          36646539316331346339303837373163666531623164633035356163386336343462626338623364
          35666566323438383363643434663063346363363331353037303862326537643235323431636638
          32363737373635323264366361643239626131653531366362346162303166343636376366376266
          63373662393432353161323733343066393937613931626135663736636632313735323063336333
          30636332323064383766663965343064313962656536303836306130333336333364363939323932
          31636262376437636463393836323636623639656462376434363464633663616232393132626164
          65653030306663636334643262386230363464646236343139336261336563663531653264336633
          39366538616138336363626462336531303164663966656362646463613764383432346237626131
          39616463323936323339666630616363373332646635626232346537393834363231363237633035
          35663363666562353632633062323462373232626361323036643333323863306635653837306161
          62386336373632393634343166663132303262363339346339326235303939626162353932333536
          35643066396664323864666135343564656434343938613134353933306461646461346264326635
          32353366383831623034636664333666616263623966333461306133343661633961653562643135
          63376230366136626461633237343134343961663031363834626536646336363038316531636330
          30653062643131383035336439396537393038343537623065663134353439383137623766306133
          37356339323036656235373231376134373664376465356436343166623165383436343365326465
          63303939383263636433653438363164333865643831396534353765373562366362613334356438
          66633439383864316265613134636365346133366266363037376231386533326364313736303534
          30336133383363303565366462326463306239633438663933633862626339646235633638323366
          39383562356439373335343165383464663366386261336638303837613035616438636530356138
          62616631666133303638386637373930653164303930623962643866356363373435633732636537
          63383562633131363264313165393863343930333563636238623833633938663339343738363465
          62356535323361656230333735373038363766376165663564313736376636376237383630363536
          64353235313166386466643562633062373532383232376536613936636531633736636166633931
          62303530343930653833313439346230666436386661303164383066323036613438383630306231
          63383365333938383031393665326532313630613237666364383338393333393830313566646264
          34353963623735323434343139356362366433356336393166366332373333653638653464613234
          36316438316362616165613432626530316134336633656566653937353533363562623532346239
          39646330383534653965653537626430643337393861383239643338336464613035306234393033
          36326563363433626162383439386138633765616231326534666366653237616566363836363064
          36356633313437616331383731653130636635386235623432626135393835646161616461616231
          65306230333562343937306330356266316134313936303864313032333165373536626563383331
          31663738373037643461376339363839386433633866333661623932383438643335623761623435
          33343832323635353633306661623230353735306534326663666234363833646530386561316365
          30646139356366653031373032313034303934636532373630333430303739383231333466356632
          65663532336162396161356531386638303265393963303038666166356461383364363132643533
          65663839653061643863656338373833663939343031653039656265613439363265323731383838
          66306530643038396139653665333739613433663161326663383665366139353332623736323462
          31303165613831303532613534366332326139366164343864356266353735366463353161376339
          32386433373239346362356238653532653761353335303931353732663864656539316337656133
          65646639326265306665626635376564623831333363366339313033346234623537653630393630
          31663562396462363130373261663138623031333138383461646430373737396437303664386134
          6433